# Correct Hindi Keyboard Layouts

This document describes the **correct** keyboard mappings based on the official layouts shown in the images.

## InScript Layout (Fixed Keyboard)

Based on **Devanagari - InScript Layout (KBDINDEV.DLL)**

### Top Row (QWERTY)
| Key | Normal | Shift |
|-----|--------|-------|
| Q | औ | ौ |
| W | ऐ | ै |
| E | आ | ा |
| R | ई | ी |
| T | ऊ | ू |
| Y | ब | भ |
| U | ह | घ |
| I | ग | ग़ |
| O | द | ध |
| P | ज | झ |
| [ | ड | ्र |
| ] | ञ | ञ |

### Home Row (ASDF)
| Key | Normal | Shift |
|-----|--------|-------|
| A | अ | ओ |
| S | स | श |
| D | द | **्** (halant) |
| F | ध | ढ |
| G | ग | घ |
| H | ह | प |
| J | ज | र |
| K | क | क़ |
| L | ल | थ |
| ; | त | छ |
| ' | च | ठ |

### Bottom Row (ZXCV)
| Key | Normal | Shift |
|-----|--------|-------|
| Z | ज़ | ट |
| X | क्ष | ष |
| C | च | व |
| V | व | ब |
| B | ब | न |
| N | न | म |
| M | म | श |
| , | ् | ्र |
| . | । | ज्ञ |
| / | ? | ? |

### Number Row
| Key | Normal | Shift |
|-----|--------|-------|
| 1 | १ | १ |
| 2 | २ | २ |
| 3 | ३ | ३ |
| 4 | ४ | ४ |
| **5** | **ज्ञ** | ५ |
| **6** | **त्र** | ६ |
| **7** | **क्ष** | ७ |
| **8** | **श्र** | ८ |
| 9 | ९ | ९ |
| 0 | ० | ० |
| - | ऋ | ऋ |
| = | ृ | ृ |

### Special Keys
- **Shift + D** = **्** (halant/virama) - **CRITICAL for conjunct formation**
- **Number keys 5, 6, 7, 8** = Direct conjuncts (ज्ञ, त्र, क्ष, श्र)

---

## Remington Layout (Phonetic)

Based on **Mangal Font Remington Layout**

### Key Feature
- **Normal key** = Full consonant or matra
- **Shift + consonant** = Half consonant with halant (्)
- **Multi-key sequences** = Complex characters

### Home Row (ASDF) - Normal Keys
| Key | Output | Description |
|-----|--------|-------------|
| A | ो | O matra |
| S | े | E matra |
| **D** | **क** | Ka consonant |
| F | ि | I matra |
| G | ह | Ha consonant |
| H | ़ | Nukta |
| J | र | Ra consonant |
| K | ा | Aa matra |
| L | स | Sa consonant |
| ; | य | Ya consonant |
| ' | श | Sha consonant |

### Home Row (ASDF) - Shift Keys
| Key | Output | Description |
|-----|--------|-------------|
| Shift+A | ौ | Double au matra |
| Shift+S | ै | Double e matra |
| **Shift+D** | **क्** | Ka with halant (half form) |
| Shift+F | थ | Tha consonant |
| Shift+G | ळ | Lla consonant |
| Shift+H | भ | Bha consonant |
| Shift+J | श्र | Shra conjunct |
| Shift+K | ज्ञ | Gya conjunct |
| Shift+L | रु | Ru with matra |
| Shift+; | ष | Retroflex sha |
| Shift+' | घ | Gha consonant |

### Top Row (QWERTY) - Normal Keys
| Key | Output | Description |
|-----|--------|-------------|
| Q | ौ | Au matra (also ृ, ऒ) |
| W | ॉ | Au matra (also ॊ, ॅ) |
| E | म | Ma consonant |
| R | त | Ta consonant |
| T | ज | Ja consonant |
| Y | ल | La consonant |
| U | न | Na consonant |
| I | प | Pa consonant |
| O | व | Va consonant |
| P | च | Cha consonant |
| [ | ख | Kha consonant |
| ] | , | Comma |

### Top Row (QWERTY) - Shift Keys
| Key | Output | Description |
|-----|--------|-------------|
| Shift+Q | फ | Pha consonant (also ऍ) |
| Shift+W | ॊ | Long O vowel (also ॅ) |
| Shift+E | म् | Ma with halant |
| Shift+R | त् | Ta with halant |
| Shift+T | ज् | Ja with halant |
| Shift+Y | ल् | La with halant |
| Shift+U | न् | Na with halant |
| Shift+I | प् | Pa with halant |
| Shift+O | व् | Va with halant |
| Shift+P | च् | Cha with halant |
| Shift+[ | क्ष | Ksha conjunct |
| Shift+] | द | Da consonant |

### Bottom Row (ZXCV) - Normal Keys
| Key | Output | Description |
|-----|--------|-------------|
| Z | ड् | Retroflex da with halant |
| X | ग | Ga consonant |
| C | ब | Ba consonant |
| V | अ | A vowel |
| B | इ | I vowel |
| N | द | Da consonant |
| M | उ | U vowel |
| , | ए | E vowel |
| . | ण | Retroflex na |
| / | ध | Dha consonant |

### Bottom Row (ZXCV) - Shift Keys
| Key | Output | Description |
|-----|--------|-------------|
| Shift+Z | र् | Ra with halant |
| Shift+X | ग् | Ga with halant |
| Shift+C | ब् | Ba with halant |
| Shift+V | ट | Retroflex ta |
| Shift+B | ठ | Retroflex tha |
| Shift+N | छ | Chha consonant |
| Shift+M | ड | Retroflex da |
| Shift+, | ढ | Retroflex dha |
| Shift+. | झ | Jha consonant |
| Shift+/ | घ | Gha consonant |

### Number Row
| Key | Normal | Shift |
|-----|--------|-------|
| 1 | 1 | / |
| 2 | 2 | : |
| 3 | 3 | • |
| 4 | 4 | - |
| 5 | 5 | ^ |
| 6 | 6 | ' |
| 7 | 7 | द् |
| 8 | 8 | व |
| 9 | 9 | ऋ |
| 0 | 0 | ड़ |
| - | ः | ऋ |
| = | ऋ | ॄ |

### Important Remington Features

1. **Halant Formation**: 
   - Type **Shift+D** → `क्` (ka with halant)
   - Then type **R** → `त` (ta)
   - Automatically forms **क्त** (conjunct)

2. **Conjunct Examples**:
   - `Shift+D` + `R` = `क्त`
   - `Shift+J` = `श्र` (direct)
   - `Shift+K` = `ज्ञ` (direct)
   - `Shift+[` = `क्ष` (direct)

3. **Matra Attachment**:
   - Type `D` (क) then `K` (ा) → `का`
   - Type `D` (क) then `F` (ि) → `कि`
   - Type `D` (क) then `A` (ो) → `को`

4. **Multi-key Sequences**:
   - `kh` → `ख`
   - `gh` → `घ`
   - `ch` → `छ`
   - `th` → `थ`
   - `dh` → `ध`
   - `ph` → `फ`
   - `bh` → `भ`
   - `sh` → `श`

---

## Implementation Notes

### Conjunct Formation Logic

1. **Remington**: 
   - User types `Shift+D` → `क्` (halant form)
   - User types `R` → System detects halant + consonant
   - System checks `CONJUNCT_MAP['क्+त']` → `क्त`
   - Replaces `क्` with `क्त`

2. **InScript**:
   - Direct key mapping: `5` → `ज्ञ`, `6` → `त्र`, `7` → `क्ष`, `8` → `श्र`
   - Or use `Shift+D` (halant) + consonant to form conjuncts

### Cursor Management

- All operations preserve cursor position using `selectionStart` and `selectionEnd`
- Works correctly when typing in middle of text
- Backspace deletes complete Unicode clusters

### Buffer Management

- Remington: Handles multi-character sequences (up to 4 characters)
- InScript: Direct single-key mapping
- Buffers cleared on space, enter, or context switch

---

## Testing Examples

### Remington Layout

```
Input: D
Output: क

Input: Shift+D, then R
Output: क्त

Input: D, then K
Output: का

Input: Shift+D, then R, then K
Output: क्ता
```

### InScript Layout

```
Input: 5
Output: ज्ञ

Input: D
Output: द

Input: Shift+D
Output: ् (halant)

Input: Shift+D, then K
Output: ् + क (or forms conjunct if mapped)
```

---

## References

1. **InScript Layout**: Devanagari - INSCRIPT Layout (KBDINDEV.DLL version 6.2.8250.0)
2. **Remington Layout**: Mangal Font Remington Layout chart
